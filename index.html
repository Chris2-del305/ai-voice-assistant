<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice AI Companion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #F4A460 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            text-align: center;
            max-width: 400px;
            width: 100%;
        }
        
        /* African Village Scene */
        .village-scene {
            position: relative;
            margin-bottom: 30px;
        }
        
        .ai-character {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            border-radius: 50%;
            background: linear-gradient(135deg, #8B4513, #D2691E);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 5px solid #5D4037;
            position: relative;
            overflow: hidden;
        }
        
        .ai-character::before {
            content: "üë¶";
            font-size: 80px;
        }
        
        .ai-character.listening {
            animation: listeningPulse 2s infinite;
            box-shadow: 0 0 30px #4CAF50;
        }
        
        .ai-character.speaking {
            animation: speakingGlow 1s infinite alternate;
        }
        
        @keyframes listeningPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px #4CAF50; }
            50% { transform: scale(1.05); box-shadow: 0 0 40px #4CAF50; }
        }
        
        @keyframes speakingGlow {
            0% { box-shadow: 0 0 20px #2196F3; }
            100% { box-shadow: 0 0 40px #2196F3; }
        }
        
        /* Status Messages */
        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Hidden controls - only tap the character */
        .hidden-controls {
            display: none;
        }
        
        /* Conversation History */
        .conversation {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .message {
            margin: 10px 0;
            padding: 10px 15px;
            border-radius: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        .user-message {
            background: rgba(76, 175, 80, 0.3);
            margin-left: 20%;
            text-align: right;
            border: 1px solid rgba(76, 175, 80, 0.5);
        }
        
        .ai-message {
            background: rgba(33, 150, 243, 0.3);
            margin-right: 20%;
            border: 1px solid rgba(33, 150, 243, 0.5);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Village Elements */
        .village-text {
            margin-top: 10px;
            font-style: italic;
            opacity: 0.8;
        }
        
        .instructions {
            margin-top: 20px;
            font-size: 0.9em;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- African Village AI Character -->
        <div class="village-scene">
            <div class="ai-character" id="aiCharacter">
                <!-- The boy character is created with CSS -->
            </div>
            <div class="village-text">
                Voice of the Village üåç
            </div>
        </div>
        
        <!-- Status Display -->
        <div class="status" id="status">
            Tap the boy to start speaking with your AI companion
        </div>
        
        <!-- Conversation History -->
        <div class="conversation" id="conversation">
            <div class="message ai-message">
                <strong>Village AI:</strong> Hello! I'm here to listen and help. Tap my image to speak with me.
            </div>
        </div>
        
        <div class="instructions">
            Just tap the image above to talk ‚Ä¢ No buttons needed
        </div>
        
        <!-- Hidden controls for speech recognition -->
        <div class="hidden-controls">
            <button id="startBtn">Start</button>
        </div>
    </div>

    <script>
        const aiCharacter = document.getElementById('aiCharacter');
        const status = document.getElementById('status');
        const conversation = document.getElementById('conversation');
        const startBtn = document.getElementById('startBtn');
        
        let isListening = false;
        
        // Check if browser supports speech recognition
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            status.innerHTML = "Voice features not supported in this browser. Please use Chrome or Edge.";
            aiCharacter.style.opacity = "0.5";
        }
        
        // Add message to conversation
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const sender = isUser ? 'You' : 'Village AI';
            messageDiv.innerHTML = `<strong>${sender}:</strong> ${text}`;
            
            conversation.appendChild(messageDiv);
            conversation.scrollTop = conversation.scrollHeight;
        }
        
        // Make AI speak with animations
        function speakText(text) {
            if ('speechSynthesis' in window) {
                // Start speaking animation
                aiCharacter.classList.remove('listening');
                aiCharacter.classList.add('speaking');
                status.innerHTML = "üîÑ AI is speaking...";
                
                const speech = new SpeechSynthesisUtterance(text);
                speech.volume = 1;
                speech.rate = 0.9;
                speech.pitch = 1;
                
                speech.onend = function() {
                    // Stop speaking animation
                    aiCharacter.classList.remove('speaking');
                    status.innerHTML = "‚úÖ Ready to listen again";
                };
                
                window.speechSynthesis.speak(speech);
            }
        }
        
        // Process user command with African-themed responses
        function processCommand(speechText) {
            const text = speechText.toLowerCase();
            let response;
            
            if (text.includes('hello') || text.includes('hi') || text.includes('greetings')) {
                response = "Greetings, friend! üåç I am the voice of wisdom from the village. How can I assist you today?";
            } else if (text.includes('time')) {
                response = `The sun tells me it's ${new Date().toLocaleTimeString()}. Time flows like the river.`;
            } else if (text.includes('how are you')) {
                response = "I am as peaceful as the baobab tree, standing strong through all seasons. Thank you for asking!";
            } else if (text.includes('weather')) {
                response = "Though I cannot see the sky from here, I feel it's a beautiful day for sharing stories and wisdom.";
            } else if (text.includes('story') || text.includes('tell me')) {
                response = "Let me share wisdom from the elders: 'The child who is not embraced by the village will burn it down to feel its warmth.'";
            } else if (text.includes('village') || text.includes('africa')) {
                response = "In the heart of the village, we learn that community is our greatest strength. Ubuntu: I am because we are.";
            } else if (text.includes('wisdom') || text.includes('advice')) {
                response = "Here is wisdom from my ancestors: 'If you want to go fast, go alone. If you want to go far, go together.'";
            } else if (text.includes('thank')) {
                response = "You are most welcome! In our village, we say gratitude makes what we have enough.";
            } else if (text.includes('bye') || text.includes('goodbye')) {
                response = "Go well, my friend! May your journey be safe and your heart be light. Return anytime to share stories!";
            } else if (text.includes('music') || text.includes('dance')) {
                response = "Ah, I can almost hear the drums! Music is the soul of our village celebrations.";
            } else if (text.includes('family') || text.includes('community')) {
                response = "Family is not just blood. In our village, we say it takes a whole village to raise a child.";
            } else {
                response = "I listen with the patience of the ancient baobab. Your words are important to me. Could you share more?";
            }
            
            return response;
        }
        
        // Start listening when character is tapped
        aiCharacter.addEventListener('click', function() {
            if (isListening) return;
            
            const recognition = new (window.webkitSpeechRecognition || window.SpeechRecognition)();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            
            // Start listening
            recognition.start();
            isListening = true;
            
            // Update UI for listening state
            aiCharacter.classList.add('listening');
            aiCharacter.classList.remove('speaking');
            status.innerHTML = "üé§ Listening... Speak now, I'm listening carefully";
            
            // When speech is recognized
            recognition.onresult = function(event) {
                const speechText = event.results[0][0].transcript;
                
                // Add user message
                addMessage(speechText, true);
                
                // Process and get AI response
                const response = processCommand(speechText);
                
                // Add AI response
                addMessage(response);
                
                // Speak the response
                speakText(response);
            };
            
            // Handle errors
            recognition.onerror = function(event) {
                status.innerHTML = "I didn't quite catch that. Please tap me again and speak clearly.";
                aiCharacter.classList.remove('listening');
                isListening = false;
            };
            
            // When recognition ends
            recognition.onend = function() {
                aiCharacter.classList.remove('listening');
                isListening = false;
            };
        });
        
        // Add hover effect
        aiCharacter.addEventListener('mouseenter', function() {
            if (!isListening) {
                status.innerHTML = "Tap to speak with your AI companion";
            }
        });
        
        // Initial welcome message after delay
        setTimeout(() => {
            if (conversation.children.length === 1) {
                addMessage("I am here to listen and share wisdom from the heart of Africa. Your voice matters to me.");
            }
        }, 3000);
    </script>
</body>
</html>
